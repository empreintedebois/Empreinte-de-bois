<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Empreinte de Bois</title>
  <meta name="description" content="Atelier de gravure et fabrication : galerie, matériaux, matrice, contact." />
  <link rel="stylesheet" href="styles.css" />
  <script src="config/site-config.js"></script>
</head>
<body>
  <header id="site-header" class="header" role="banner">
    <div class="hdr-inner">
      <a class="brand" href="#" aria-label="Retour à l'accueil">
        <img id="brand-logo" class="brand__logo" alt="Empreinte de Bois - logo" />
      </a>
      <h1 id="site-title" class="title"></h1>
      <button id="btn-matrice" class="btn-matrice" aria-haspopup="dialog" aria-controls="modal-root">Matrice</button>
    </div>
  </header>

  <section id="hero" class="hero" aria-label="Hero principal">
    <div class="hero__overlay"></div>
    <div class="hero__inner">
      <h2 id="subtitle" class="subtitle"></h2>
      <div class="subtitle-ornament ornament-left" aria-hidden="true"></div>
      <div class="subtitle-ornament ornament-right" aria-hidden="true"></div>
    </div>
  </section>

  <section id="galerie" class="band band--gallery" aria-label="Galerie d'images">
    <div class="gallery-banner" aria-hidden="true"></div>
    <div class="gallery-wrap">
      <button class="gal-nav gal-prev" aria-label="Image précédente" data-dir="-1"></button>
      <div class="gallery-grid" role="list" aria-live="polite" aria-busy="false"></div>
      <button class="gal-nav gal-next" aria-label="Image suivante" data-dir="1"></button>
    </div>
  </section>

  <section class="band band--content grid-btm-align" aria-label="Informations">
    <div id="materiaux" class="panel">
      <h3>Matériaux</h3>
      <details class="acc" open>
        <summary>M01 — Bois</summary>
        <div class="acc-panel">
          <p>Essences variées, finitions personnalisées.</p>
        </div>
      </details>
      <details class="acc">
        <summary>M02 — Acrylique</summary>
        <div class="acc-panel">
          <p>Découpe nette, multiples coloris.</p>
        </div>
      </details>
    </div>

    <div id="contact" class="panel">
      <h3>Contact</h3>
      <form id="contact-form" action="mailto:empreinte.de.bois@example.com" method="post">
        <label>Nom
          <input name="name" required autocomplete="name" />
        </label>
        <label>Email
          <input type="email" name="email" required autocomplete="email" />
        </label>
        <label>Message
          <textarea name="message" rows="5" required></textarea>
        </label>
        <button type="submit">Envoyer</button>
      </form>
    </div>
  </section>

  <div id="modal-root" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal__overlay" data-close="1"></div>
    <div class="modal__content" role="document" aria-labelledby="modal-title">
      <div class="modal__hdr">
        <h4 id="modal-title">Matrice</h4>
        <button class="modal__close" aria-label="Fermer la matrice" data-close="1">×</button>
      </div>
      <iframe class="modal__iframe" title="Matrice" src="matrice/matrice.html" loading="lazy"></iframe>
    </div>
  </div>

  <script type="module" src="js/main.js"></script>
  <script defer src="js/modules/ui-modal.js"></script>

  <!-- Script parallaxe header : le fond se déplace 2x moins vite que le scroll -->
  <script>
    (function () {
      const root = document.documentElement;

      function getParallaxFactor() {
        const val = getComputedStyle(root).getPropertyValue('--header-parallax-factor');
        const num = parseFloat(val);
        return Number.isNaN(num) ? 0.5 : num;
      }

      const factor = getParallaxFactor();
      let ticking = false;

      function updateParallax() {
        const scrollY = window.scrollY || window.pageYOffset || 0;
        const offset = -scrollY * factor; // 2x moins vite si factor = 0.5
        root.style.setProperty('--header-parallax-offset', offset + 'px');
        ticking = false;
      }

      window.addEventListener('scroll', function () {
        if (!ticking) {
          window.requestAnimationFrame(updateParallax);
          ticking = true;
        }
      });

      // Position initiale au chargement
      updateParallax();
    })();
  </script>
</body>
</html>
