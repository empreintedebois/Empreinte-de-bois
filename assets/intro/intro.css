
:root{
  --overlayBg: rgba(0,0,0,.80);
  --centerW: 60vw;                 /* largeur du bloc central (logo-texte + shards) */
  --groupGap: clamp(12px, 2.4vw, 28px);
  --logoH: 180px;                  /* sera recalé par JS = hauteur commune */
  --loaderOpacity: .9;
}

/* Verrouillage scroll durant l’intro */
html.intro-lock, body.intro-lock{
  height: 100%;
  overflow: hidden !important;
  touch-action: none;
}

/* Overlay plein écran hermétique */
#intro-overlay{
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: grid;
  place-items: center;
  background: var(--overlayBg);
  opacity: 1;
  transition: opacity 600ms ease;
}
#intro-overlay.is-hidden{
  opacity: 0;
  pointer-events: none;
}

/* Stage = conteneur de l’ensemble */
#intro-stage{
  width: min(92vw, 1280px);
  display: grid;
  justify-items: center;
  position: relative;
}

/* Groupe : [left]  [center (texte+shards)]  [right] */
#intro-row{
  width: 100%;
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  justify-items: center;
  column-gap: var(--groupGap);
  position: relative;
}

/* Motifs latéraux : même hauteur que le logo-texte */
.intro-motif{
  height: var(--logoH);
  width: auto;
  object-fit: contain;
  display: block;
  transform-origin: center center;
  will-change: transform, opacity;
}

/* Bloc central = conteneur dimensionné au ratio du logo-texte (fixé par JS) */
#intro-center{
  width: var(--centerW);
  position: relative;
}

/* L’image du logo-texte (sous les shards) */
#intro-logo-text{
  display: block;
  width: 100%;
  height: auto;
  object-fit: contain;
  opacity: 1;
  will-change: opacity, transform;
}

/* Pile des shards exactement par-dessus le logo-texte */
#intro-shards{
  position: absolute;
  inset: 0;
  pointer-events: none;
}
#intro-shards .shard{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;  /* même cadrage que le logo-texte */
  opacity: 0;           /* elles apparaissent pendant la transition */
  transform: translate(0,0) rotate(0deg) scale(1);
  will-change: transform, opacity;
}

/* Loader 4 points (vague) en bas */
#intro-loader{
  position: fixed;
  left: 0; right: 0; bottom: 18px;
  display: flex; justify-content: center; gap: 10px;
  z-index: 10000; pointer-events: none; opacity: var(--loaderOpacity);
}
#intro-loader .dot{
  width: 8px; height: 8px; border-radius: 999px;
  background: rgba(255,255,255,.55);
  animation: introWave 1.2s infinite ease-in-out;
}
#intro-loader .dot:nth-child(2){ animation-delay: .12s; }
#intro-loader .dot:nth-child(3){ animation-delay: .24s; }
#intro-loader .dot:nth-child(4){ animation-delay: .36s; }
@keyframes introWave{
  0%,100%{ transform: translateY(0); opacity:.45; }
  50%   { transform: translateY(-8px); opacity:1; }
}

/* Tremblements contrôlés (léger / fort) */
@keyframes tremble-soft{
  0%{ transform: translate(0,0) rotate(0deg); }
  25%{ transform: translate(-0.6px, 0.4px) rotate(-.1deg); }
  50%{ transform: translate(0.8px, -0.5px) rotate(.12deg); }
  75%{ transform: translate(-0.5px, -0.3px) rotate(-.08deg); }
  100%{ transform: translate(0,0) rotate(0deg); }
}
@keyframes tremble-strong{
  0%{ transform: translate(0,0) rotate(0deg); }
  25%{ transform: translate(-1.8px, 1.2px) rotate(-.35deg); }
  50%{ transform: translate(2.0px, -1.4px) rotate(.40deg); }
  75%{ transform: translate(-1.4px, -1.0px) rotate(-.30deg); }
  100%{ transform: translate(0,0) rotate(0deg); }
}
.is-tremble-soft{ animation: tremble-soft .6s infinite; }
.is-tremble-strong{ animation: tremble-strong .45s infinite; }

/* Rideau (si tu déclenches un reveal ensuite) */
#intro-curtain{
  position: fixed;
  inset: 0;
  z-index: 9998;
  pointer-events: none;
  opacity: 0;
}
#intro-curtain.is-on{ opacity: 1; }

/* Mobile : on borne la hauteur commune si minuscule */
@media (max-width: 420px){
  :root{ --logoH: 140px; }
}
